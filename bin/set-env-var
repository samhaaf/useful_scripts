#!/bin/bash

VAR=$1
VALUE=$2

# Check if the variable is PATH
if [ "$VAR" == "PATH" ] ; then
    echo "Error: to update the path, please use add-to-path"
    return 1
fi

for FILE in ~/.zprofile ~/.profile ~/.bash_profile
do
    # Create the file if it doesn't exist
    if [ ! -f "$FILE" ] ; then
        touch "$FILE"
    fi

    # If the variable is already in the file, delete it
    if grep -q "export $VAR=" "$FILE" ; then
        sed -i "/export $VAR=/d" "$FILE"
    fi

    # Add the variable to the file
    echo "export $VAR=$VALUE" >> "$FILE"
done
